<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference - CPL Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cpl: {
                            red: '#c8102e',
                            dark: '#1a1a2e',
                            darker: '#12121f',
                            card: '#252540'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .json-key { color: #60a5fa; }
        .json-string { color: #4ade80; }
        .json-number { color: #f472b6; }
        html { scroll-behavior: smooth; }
    </style>
</head>
<body class="bg-cpl-dark text-gray-100 min-h-screen">
    <div class="max-w-5xl mx-auto px-4 py-8">

        <!-- Header -->
        <header class="py-6 border-b border-gray-700 mb-8">
            <a href="./index.html" class="text-gray-400 hover:text-white text-sm">&larr; Back to Docs</a>
            <h1 class="text-3xl font-bold mt-2">API Reference</h1>
            <p class="text-gray-400 mt-1">Complete endpoint documentation for the CPL Analytics API</p>
        </header>

        <!-- Table of Contents -->
        <nav class="bg-cpl-card rounded-lg p-5 mb-8">
            <h2 class="font-bold text-cpl-red mb-3">Contents</h2>
            <ul class="grid md:grid-cols-2 gap-2 text-sm">
                <li><a href="#overview" class="text-gray-400 hover:text-white">Overview</a></li>
                <li><a href="#authentication" class="text-gray-400 hover:text-white">Authentication</a></li>
                <li><a href="#rate-limits" class="text-gray-400 hover:text-white">Rate Limits</a></li>
                <li><a href="#get-apimatches" class="text-gray-400 hover:text-white">GET /api/matches</a></li>
                <li><a href="#get-apistandings" class="text-gray-400 hover:text-white">GET /api/standings</a></li>
                <li><a href="#get-apiteams" class="text-gray-400 hover:text-white">GET /api/teams</a></li>
                <li><a href="#error-handling" class="text-gray-400 hover:text-white">Error Handling</a></li>
                <li><a href="#cors" class="text-gray-400 hover:text-white">CORS Support</a></li>
            </ul>
        </nav>

        <!-- Overview -->
        <section id="overview" class="mb-12">
            <h2 class="text-2xl font-bold text-cpl-red mb-4">Overview</h2>
            <p class="text-gray-300 mb-4">The CPL Analytics API provides read-only access to Canadian Premier League match data, standings, and team information. All endpoints return JSON responses.</p>

            <div class="bg-cpl-card rounded-lg p-5">
                <h3 class="font-semibold mb-3">Base URL</h3>
                <code class="bg-cpl-darker px-3 py-2 rounded block text-green-400">https://canadasoccerapi.com</code>
                <p class="text-gray-500 text-sm mt-3">For local development: <code class="text-gray-400">http://localhost:3000</code></p>
            </div>
        </section>

        <!-- Authentication -->
        <section id="authentication" class="mb-12">
            <h2 class="text-2xl font-bold text-cpl-red mb-4">Authentication</h2>
            <div class="bg-green-900/20 border border-green-600 rounded-lg p-5">
                <p class="text-green-400 font-semibold">No authentication required</p>
                <p class="text-gray-400 text-sm mt-1">The API is publicly accessible for educational and research purposes.</p>
            </div>
        </section>

        <!-- Rate Limits -->
        <section id="rate-limits" class="mb-12">
            <h2 class="text-2xl font-bold text-cpl-red mb-4">Rate Limits</h2>
            <table class="w-full bg-cpl-card rounded-lg overflow-hidden">
                <thead class="bg-cpl-darker">
                    <tr>
                        <th class="text-left p-4 text-cpl-red">Tier</th>
                        <th class="text-left p-4 text-cpl-red">Limit</th>
                        <th class="text-left p-4 text-cpl-red">Window</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-t border-gray-700">
                        <td class="p-4">Public (testing)</td>
                        <td class="p-4 text-yellow-400">20 requests</td>
                        <td class="p-4">per hour per IP</td>
                    </tr>
                </tbody>
            </table>
            <p class="text-gray-500 text-sm mt-3">When rate limited, the API returns HTTP 429 with a <code class="text-gray-400">Retry-After</code> header.</p>
        </section>

        <!-- GET /api/matches -->
        <section id="get-apimatches" class="mb-12">
            <div class="flex items-center gap-3 mb-4">
                <span class="bg-green-600 text-white text-sm font-bold px-3 py-1 rounded">GET</span>
                <h2 class="text-2xl font-bold">/api/matches</h2>
            </div>
            <p class="text-gray-300 mb-6">Retrieve historical match data with optional filtering and pagination.</p>

            <h3 class="font-semibold text-cpl-red mb-3">Parameters</h3>
            <table class="w-full bg-cpl-card rounded-lg overflow-hidden mb-6">
                <thead class="bg-cpl-darker">
                    <tr>
                        <th class="text-left p-4 text-cpl-red">Parameter</th>
                        <th class="text-left p-4 text-cpl-red">Type</th>
                        <th class="text-left p-4 text-cpl-red">Required</th>
                        <th class="text-left p-4 text-cpl-red">Description</th>
                    </tr>
                </thead>
                <tbody class="text-sm">
                    <tr class="border-t border-gray-700">
                        <td class="p-4 font-mono text-blue-400">season</td>
                        <td class="p-4">Integer</td>
                        <td class="p-4">No</td>
                        <td class="p-4 text-gray-400">Filter by season year (2019-2025)</td>
                    </tr>
                    <tr class="border-t border-gray-700">
                        <td class="p-4 font-mono text-blue-400">team</td>
                        <td class="p-4">String</td>
                        <td class="p-4">No</td>
                        <td class="p-4 text-gray-400">Filter by team name (case-insensitive, partial match)</td>
                    </tr>
                    <tr class="border-t border-gray-700">
                        <td class="p-4 font-mono text-blue-400">limit</td>
                        <td class="p-4">Integer</td>
                        <td class="p-4">No</td>
                        <td class="p-4 text-gray-400">Maximum results per page (default: 100, max: 500)</td>
                    </tr>
                    <tr class="border-t border-gray-700">
                        <td class="p-4 font-mono text-blue-400">offset</td>
                        <td class="p-4">Integer</td>
                        <td class="p-4">No</td>
                        <td class="p-4 text-gray-400">Number of results to skip (default: 0)</td>
                    </tr>
                </tbody>
            </table>

            <h3 class="font-semibold text-cpl-red mb-3">Example Requests</h3>
            <div class="space-y-3 mb-6">
                <div class="bg-cpl-darker rounded p-4">
                    <p class="text-gray-500 text-sm mb-1"># Get all matches</p>
                    <code class="text-green-400 text-sm">curl "https://canadasoccerapi.com/api/matches"</code>
                </div>
                <div class="bg-cpl-darker rounded p-4">
                    <p class="text-gray-500 text-sm mb-1"># Get 2024 season matches</p>
                    <code class="text-green-400 text-sm">curl "https://canadasoccerapi.com/api/matches?season=2024"</code>
                </div>
                <div class="bg-cpl-darker rounded p-4">
                    <p class="text-gray-500 text-sm mb-1"># Get Forge FC matches with pagination</p>
                    <code class="text-green-400 text-sm">curl "https://canadasoccerapi.com/api/matches?team=Forge&limit=10&offset=0"</code>
                </div>
            </div>

            <h3 class="font-semibold text-cpl-red mb-3">Example Response</h3>
            <pre class="bg-cpl-darker rounded p-4 text-sm overflow-x-auto"><code>{
  <span class="json-key">"total"</span>: <span class="json-number">156</span>,
  <span class="json-key">"count"</span>: <span class="json-number">2</span>,
  <span class="json-key">"offset"</span>: <span class="json-number">0</span>,
  <span class="json-key">"limit"</span>: <span class="json-number">2</span>,
  <span class="json-key">"matches"</span>: [
    {
      <span class="json-key">"date"</span>: <span class="json-string">"2024-04-13"</span>,
      <span class="json-key">"home_team"</span>: <span class="json-string">"Forge FC"</span>,
      <span class="json-key">"away_team"</span>: <span class="json-string">"Atletico Ottawa"</span>,
      <span class="json-key">"home_goals"</span>: <span class="json-number">3</span>,
      <span class="json-key">"away_goals"</span>: <span class="json-number">1</span>,
      <span class="json-key">"season"</span>: <span class="json-number">2024</span>,
      <span class="json-key">"venue"</span>: <span class="json-string">"Tim Hortons Field"</span>
    },
    {
      <span class="json-key">"date"</span>: <span class="json-string">"2024-04-14"</span>,
      <span class="json-key">"home_team"</span>: <span class="json-string">"Cavalry FC"</span>,
      <span class="json-key">"away_team"</span>: <span class="json-string">"Pacific FC"</span>,
      <span class="json-key">"home_goals"</span>: <span class="json-number">2</span>,
      <span class="json-key">"away_goals"</span>: <span class="json-number">2</span>,
      <span class="json-key">"season"</span>: <span class="json-number">2024</span>,
      <span class="json-key">"venue"</span>: <span class="json-string">"ATCO Field"</span>
    }
  ]
}</code></pre>
        </section>

        <!-- GET /api/standings -->
        <section id="get-apistandings" class="mb-12">
            <div class="flex items-center gap-3 mb-4">
                <span class="bg-green-600 text-white text-sm font-bold px-3 py-1 rounded">GET</span>
                <h2 class="text-2xl font-bold">/api/standings</h2>
            </div>
            <p class="text-gray-300 mb-6">Get league standings for one or all seasons.</p>

            <h3 class="font-semibold text-cpl-red mb-3">Parameters</h3>
            <table class="w-full bg-cpl-card rounded-lg overflow-hidden mb-6">
                <thead class="bg-cpl-darker">
                    <tr>
                        <th class="text-left p-4 text-cpl-red">Parameter</th>
                        <th class="text-left p-4 text-cpl-red">Type</th>
                        <th class="text-left p-4 text-cpl-red">Required</th>
                        <th class="text-left p-4 text-cpl-red">Description</th>
                    </tr>
                </thead>
                <tbody class="text-sm">
                    <tr class="border-t border-gray-700">
                        <td class="p-4 font-mono text-blue-400">season</td>
                        <td class="p-4">Integer</td>
                        <td class="p-4">No</td>
                        <td class="p-4 text-gray-400">Specific season year (omit for all seasons)</td>
                    </tr>
                </tbody>
            </table>

            <h3 class="font-semibold text-cpl-red mb-3">Example Request</h3>
            <div class="bg-cpl-darker rounded p-4 mb-6">
                <code class="text-green-400 text-sm">curl "https://canadasoccerapi.com/api/standings?season=2024"</code>
            </div>

            <h3 class="font-semibold text-cpl-red mb-3">Example Response</h3>
            <pre class="bg-cpl-darker rounded p-4 text-sm overflow-x-auto"><code>{
  <span class="json-key">"season"</span>: <span class="json-number">2024</span>,
  <span class="json-key">"standings"</span>: [
    {
      <span class="json-key">"position"</span>: <span class="json-number">1</span>,
      <span class="json-key">"team"</span>: <span class="json-string">"Forge FC"</span>,
      <span class="json-key">"played"</span>: <span class="json-number">28</span>,
      <span class="json-key">"wins"</span>: <span class="json-number">18</span>,
      <span class="json-key">"draws"</span>: <span class="json-number">5</span>,
      <span class="json-key">"losses"</span>: <span class="json-number">5</span>,
      <span class="json-key">"goals_for"</span>: <span class="json-number">52</span>,
      <span class="json-key">"goals_against"</span>: <span class="json-number">28</span>,
      <span class="json-key">"goal_difference"</span>: <span class="json-number">24</span>,
      <span class="json-key">"points"</span>: <span class="json-number">59</span>
    }
  ],
  <span class="json-key">"source"</span>: <span class="json-string">"official"</span>
}</code></pre>

            <div class="bg-cpl-card rounded-lg p-5 mt-6">
                <h4 class="font-semibold mb-2">Data Source Field</h4>
                <table class="w-full text-sm">
                    <tr class="border-b border-gray-700">
                        <td class="py-2 font-mono text-green-400">"official"</td>
                        <td class="py-2 text-gray-400">From official CanPL SDP API (excludes playoffs)</td>
                    </tr>
                    <tr>
                        <td class="py-2 font-mono text-yellow-400">"calculated"</td>
                        <td class="py-2 text-gray-400">Calculated from match results</td>
                    </tr>
                </table>
            </div>
        </section>

        <!-- GET /api/teams -->
        <section id="get-apiteams" class="mb-12">
            <div class="flex items-center gap-3 mb-4">
                <span class="bg-green-600 text-white text-sm font-bold px-3 py-1 rounded">GET</span>
                <h2 class="text-2xl font-bold">/api/teams</h2>
            </div>
            <p class="text-gray-300 mb-6">Get information about CPL teams including metadata.</p>

            <h3 class="font-semibold text-cpl-red mb-3">Parameters</h3>
            <table class="w-full bg-cpl-card rounded-lg overflow-hidden mb-6">
                <thead class="bg-cpl-darker">
                    <tr>
                        <th class="text-left p-4 text-cpl-red">Parameter</th>
                        <th class="text-left p-4 text-cpl-red">Type</th>
                        <th class="text-left p-4 text-cpl-red">Required</th>
                        <th class="text-left p-4 text-cpl-red">Description</th>
                    </tr>
                </thead>
                <tbody class="text-sm">
                    <tr class="border-t border-gray-700">
                        <td class="p-4 font-mono text-blue-400">active_only</td>
                        <td class="p-4">String</td>
                        <td class="p-4">No</td>
                        <td class="p-4 text-gray-400">Set to "true" to exclude inactive teams</td>
                    </tr>
                </tbody>
            </table>

            <h3 class="font-semibold text-cpl-red mb-3">Example Request</h3>
            <div class="bg-cpl-darker rounded p-4 mb-6">
                <code class="text-green-400 text-sm">curl "https://canadasoccerapi.com/api/teams?active_only=true"</code>
            </div>

            <h3 class="font-semibold text-cpl-red mb-3">Example Response</h3>
            <pre class="bg-cpl-darker rounded p-4 text-sm overflow-x-auto"><code>{
  <span class="json-key">"count"</span>: <span class="json-number">8</span>,
  <span class="json-key">"teams"</span>: [
    {
      <span class="json-key">"name"</span>: <span class="json-string">"Forge FC"</span>,
      <span class="json-key">"city"</span>: <span class="json-string">"Hamilton"</span>,
      <span class="json-key">"stadium"</span>: <span class="json-string">"Tim Hortons Field"</span>,
      <span class="json-key">"founded"</span>: <span class="json-number">2018</span>,
      <span class="json-key">"latitude"</span>: <span class="json-number">43.2557</span>,
      <span class="json-key">"longitude"</span>: <span class="json-number">-79.8711</span>,
      <span class="json-key">"surface"</span>: <span class="json-string">"grass"</span>,
      <span class="json-key">"status"</span>: <span class="json-string">"active"</span>
    }
  ]
}</code></pre>
        </section>

        <!-- Error Handling -->
        <section id="error-handling" class="mb-12">
            <h2 class="text-2xl font-bold text-cpl-red mb-4">Error Handling</h2>

            <h3 class="font-semibold mb-3">HTTP Status Codes</h3>
            <table class="w-full bg-cpl-card rounded-lg overflow-hidden mb-6">
                <thead class="bg-cpl-darker">
                    <tr>
                        <th class="text-left p-4 text-cpl-red">Code</th>
                        <th class="text-left p-4 text-cpl-red">Meaning</th>
                        <th class="text-left p-4 text-cpl-red">Description</th>
                    </tr>
                </thead>
                <tbody class="text-sm">
                    <tr class="border-t border-gray-700">
                        <td class="p-4 text-green-400">200</td>
                        <td class="p-4">OK</td>
                        <td class="p-4 text-gray-400">Request successful</td>
                    </tr>
                    <tr class="border-t border-gray-700">
                        <td class="p-4 text-yellow-400">400</td>
                        <td class="p-4">Bad Request</td>
                        <td class="p-4 text-gray-400">Invalid parameters</td>
                    </tr>
                    <tr class="border-t border-gray-700">
                        <td class="p-4 text-yellow-400">404</td>
                        <td class="p-4">Not Found</td>
                        <td class="p-4 text-gray-400">Endpoint does not exist</td>
                    </tr>
                    <tr class="border-t border-gray-700">
                        <td class="p-4 text-red-400">429</td>
                        <td class="p-4">Too Many Requests</td>
                        <td class="p-4 text-gray-400">Rate limit exceeded</td>
                    </tr>
                    <tr class="border-t border-gray-700">
                        <td class="p-4 text-red-400">500</td>
                        <td class="p-4">Server Error</td>
                        <td class="p-4 text-gray-400">Internal server error</td>
                    </tr>
                </tbody>
            </table>

            <h3 class="font-semibold mb-3">Error Response Format</h3>
            <pre class="bg-cpl-darker rounded p-4 text-sm"><code>{
  <span class="json-key">"error"</span>: <span class="json-string">"Failed to load matches data"</span>
}</code></pre>
        </section>

        <!-- CORS -->
        <section id="cors" class="mb-12">
            <h2 class="text-2xl font-bold text-cpl-red mb-4">CORS Support</h2>
            <p class="text-gray-300 mb-4">The API supports Cross-Origin Resource Sharing (CORS) for browser-based applications.</p>

            <div class="bg-cpl-card rounded-lg p-5 mb-6">
                <h3 class="font-semibold mb-3">CORS Headers</h3>
                <pre class="text-sm text-gray-400"><code>Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, OPTIONS
Access-Control-Allow-Headers: Content-Type</code></pre>
            </div>

            <h3 class="font-semibold mb-3">Browser Usage</h3>
            <pre class="bg-cpl-darker rounded p-4 text-sm overflow-x-auto"><code><span class="text-gray-500">// Works directly in browser without proxy</span>
<span class="text-blue-400">fetch</span>(<span class="json-string">'https://canadasoccerapi.com/api/matches'</span>)
  .then(response => response.json())
  .then(data => console.log(data.matches));</code></pre>
        </section>

        <!-- Caching -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold text-cpl-red mb-4">Caching</h2>
            <table class="w-full bg-cpl-card rounded-lg overflow-hidden">
                <thead class="bg-cpl-darker">
                    <tr>
                        <th class="text-left p-4 text-cpl-red">Endpoint</th>
                        <th class="text-left p-4 text-cpl-red">Cache Duration</th>
                    </tr>
                </thead>
                <tbody class="text-sm">
                    <tr class="border-t border-gray-700">
                        <td class="p-4 font-mono">/api/matches</td>
                        <td class="p-4 text-gray-400">1 hour</td>
                    </tr>
                    <tr class="border-t border-gray-700">
                        <td class="p-4 font-mono">/api/standings</td>
                        <td class="p-4 text-gray-400">1 hour</td>
                    </tr>
                    <tr class="border-t border-gray-700">
                        <td class="p-4 font-mono">/api/teams</td>
                        <td class="p-4 text-gray-400">24 hours</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Related Docs -->
        <section class="bg-cpl-card rounded-lg p-6">
            <h3 class="font-bold text-cpl-red mb-4">Related Documentation</h3>
            <div class="grid md:grid-cols-3 gap-4">
                <a href="./data-dictionary.html" class="text-gray-400 hover:text-white">Data Dictionary &rarr;</a>
                <a href="./use-cases.html" class="text-gray-400 hover:text-white">Use Cases &rarr;</a>
                <a href="./data-sources.html" class="text-gray-400 hover:text-white">Data Sources &rarr;</a>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center py-8 border-t border-gray-700 mt-12">
            <p class="text-gray-400">
                <a href="/" class="text-cpl-red hover:underline">API Home</a>
                <span class="mx-2">|</span>
                <a href="./index.html" class="text-cpl-red hover:underline">Docs Index</a>
                <span class="mx-2">|</span>
                <a href="https://github.com/GoCeylan/canpl-analytics" target="_blank" class="text-cpl-red hover:underline">GitHub</a>
            </p>
        </footer>
    </div>
</body>
</html>
